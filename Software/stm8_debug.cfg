# STM8 Debug Configuration for OpenOCD 0.10.0
interface stlink
transport select swim

# STM8S003 Settings
set CHIPNAME stm8s003

# Target setup
swim newtap $CHIPNAME cpu -irlen 4 -ircapture 0x1 -irmask 0xf
target create $CHIPNAME.cpu stm8 -endian little -chain-position $CHIPNAME.cpu

# Flash configuration (8KB)
flash bank $_FLASHNAME stm8 0x8000 0 0 0 $CHIPNAME.cpu

# Reset configuration
reset_config srst_only

# Speed settings
stlink_set_swd_freq 100

# Initialize
init